geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
geom_point(aes(x = numjour,
y = ndec,
group = ADEC,
colour = c("grey80","grey80","grey80")) +
ylim(5,15) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
geom_point(aes(x = numjour,
y = ndec,
group = ADEC,
colour = c("grey80","grey80","grey80"))) +
ylim(5,15) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
geom_point(aes(x = numjour,
y = ndec,
group = ADEC,
colour = c("grey80","grey80","grey80"))) +
ylim(5,15) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
geom_point(aes(x = numjour,
y = ndec,
group = ADEC,
colour = factor(ADEC))) +
ylim(5,15) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC,
colour = factor(ADEC))) +
ylim(5,15) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey80") +
ylim(5,15) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey80") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(5,15) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey80") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey70") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(0,20) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey70") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey90") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(0,20) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey70") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey70") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(0,20) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey70") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(0,20) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey90") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey70") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey80") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(0,20) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey95") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey95") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey70") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey90") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(0,20) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey95") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey95") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey70") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey70") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey90") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(0,24) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour")
theme_set(theme_minimal())
deces_jours <- fread("Data/deces_jours_2014-2020.csv")[md_dec != "02-29"]
# Numéro du jour de l'année et nom du jour de la semaine
corresp_numjour <- data.table(md_dec = format(seq(ymd("2018-01-01"),
ymd("2018-12-31"),
by="days"), "%m-%d"),
numjour = 1:365)
deces_jours[corresp_numjour, numjour := i.numjour, on = "md_dec"]
## Lissage Gaussian du nombre de morts par jour sur une fenêtre de 30 jours
deces_plot1820 <- deces_jours[ADEC %in% 2018:2020
][data.table(date_dec = sort(deces_jours[ADEC %in% 2018:2020]$date_dec),
smooth_dec = smth.gaussian(deces_jours[ADEC %in% 2018:2020
][order(date_dec), ndec],
window = 30, alpha = 2.5)),
smooth_dec := i.smooth_dec,
on = "date_dec"]
plot_sd1819 <- deces_jours[
ADEC %in% 2018:2019,
.(ndec = mean(ndec),
sd = sd(ndec),
ADEC = "2018-2019",
numjour = unique(numjour)),
keyby = md_dec]
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey85") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey50") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = factor(ADEC))) +
ylim(0,23) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour",
title = "",
caption = "Source : INSEE, 2018-2020 \n
Champ : Décès de personnes agées de 18 à 29 ans survenus en France métropolitaine de 2014 à 2020.")
deces_plot1820 <- deces_jours[ADEC %in% 2018:2020
][data.table(date_dec = sort(deces_jours[ADEC %in% 2018:2020]$date_dec),
smooth_dec = smth.gaussian(deces_jours[ADEC %in% 2018:2020
][order(date_dec), ndec],
window = 30, alpha = 2.5)),
smooth_dec := i.smooth_dec,
on = "date_dec"]
plot_sd1819 <- deces_jours[
ADEC %in% 2018:2019,
.(ndec = mean(ndec),
sd = sd(ndec),
ADEC = "2018-2019",
numjour = unique(numjour)),
keyby = md_dec]
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey85") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey50") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC,
colour = c("deepskyblue4", "deepskyblue1", "darkorange1")) +
ylim(0,23) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour",
title = "",
caption = "Source : INSEE, 2018-2020 \n
Champ : Décès de personnes agées de 18 à 29 ans survenus en France métropolitaine de 2014 à 2020 (en enlevant le 29 février 2016 et 2020.")
deces_plot1820 <- deces_jours[ADEC %in% 2018:2020
][data.table(date_dec = sort(deces_jours[ADEC %in% 2018:2020]$date_dec),
smooth_dec = smth.gaussian(deces_jours[ADEC %in% 2018:2020
][order(date_dec), ndec],
window = 30, alpha = 2.5)),
smooth_dec := i.smooth_dec,
on = "date_dec"]
plot_sd1819 <- deces_jours[
ADEC %in% 2018:2019,
.(ndec = mean(ndec),
sd = sd(ndec),
ADEC = "2018-2019",
numjour = unique(numjour)),
keyby = md_dec]
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey85") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey50") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC)
colour = c("deepskyblue4", "deepskyblue1", "darkorange1") +
ylim(0,23) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour",
title = "",
caption = "Source : INSEE, 2018-2020 \n
Champ : Décès de personnes agées de 18 à 29 ans survenus en France métropolitaine de 2014 à 2020 (en enlevant le 29 février 2016 et 2020.")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey85") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey50") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC)
colour = c("deepskyblue4", "deepskyblue1", "darkorange1")) +
ylim(0,23) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour",
title = "",
caption = "Source : INSEE, 2018-2020 \n
Champ : Décès de personnes agées de 18 à 29 ans survenus en France métropolitaine de 2014 à 2020 (en enlevant le 29 février 2016 et 2020.")
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey85") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey50") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC),
colour = c("deepskyblue4", "deepskyblue1", "darkorange1")) +
ylim(0,23) +
scale_colour_viridis_d("Année", end = 0.8, option = "F") +
labs(y = "Nombre de morts", x = "Jour",
title = "",
caption = "Source : INSEE, 2018-2020 \n
Champ : Décès de personnes agées de 18 à 29 ans survenus en France métropolitaine de 2014 à 2020 (en enlevant le 29 février 2016 et 2020.")
deces_plot1820
table(deces_plot1820$ADEC)
c("deepskyblue4", "deepskyblue1", "darkorange1")
deces_plot1820 <- deces_jours[ADEC %in% 2018:2020
][data.table(date_dec = sort(deces_jours[ADEC %in% 2018:2020]$date_dec),
smooth_dec = smth.gaussian(deces_jours[ADEC %in% 2018:2020
][order(date_dec), ndec],
window = 30, alpha = 2.5)),
smooth_dec := i.smooth_dec,
on = "date_dec"]
plot_sd1819 <- deces_jours[
ADEC %in% 2018:2019,
.(ndec = mean(ndec),
sd = sd(ndec),
ADEC = "2018-2019",
numjour = unique(numjour)),
keyby = md_dec]
ggplot(deces_plot1820) +
geom_rect(aes(xmin = deces_plot1820[md_dec == "03-17", unique(numjour)],
xmax = deces_plot1820[md_dec == "05-10", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_rect(aes(xmin = deces_plot1820[md_dec == "10-30", unique(numjour)],
xmax = deces_plot1820[md_dec == "12-14", unique(numjour)],
ymin = -Inf, ymax = Inf), alpha = 0.1, fill = "grey80") +
geom_line(aes(x = numjour,
y = ndec,
group = ADEC),
colour = "grey85") +
geom_vline(xintercept = deces_plot1820[md_dec == "03-17", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "05-10", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "10-30", unique(numjour)], colour = "grey50") +
geom_vline(xintercept = deces_plot1820[md_dec == "12-14", unique(numjour)], colour = "grey50") +
geom_line(aes(x = numjour,
y = smooth_dec,
group = ADEC),
colour = c("deepskyblue4", "deepskyblue1", "darkorange1")) +
ylim(0,23)
